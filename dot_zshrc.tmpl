(( ${+commands[direnv]} )) && emulate zsh -c "$(direnv export zsh)"

if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# https://github.com/romkatv/powerlevel10k#how-do-i-initialize-direnv-when-using-instant-prompt
(( ${+commands[direnv]} )) && emulate zsh -c "$(direnv hook zsh)"

alias ll='lsd -alhF'
alias cloc='cloc --vcs=git'

# Homebrew
{{ if (eq .chezmoi.os "darwin") -}}
eval $(/opt/homebrew/bin/brew shellenv)
{{- end }}

{{ if (and (eq .chezmoi.os "darwin") (eq .chezmoi.arch "arm64" )) -}}
# Rosland aliases
alias ros='arch -x86_64'
alias rbrew='arch -x86_64 /usr/local/bin/brew'

# pymssql on arm64
export LDFLAGS="-L/opt/homebrew/opt/freetds/lib -L/opt/homebrew/opt/openssl@3/lib"
export CFLAGS="-I/opt/homebrew/opt/freetds/include"
export CPPFLAGS="-I/opt/homebrew/opt/openssl@3/include"

# openjdk
export PATH="$PATH:/opt/homebrew/opt/openjdk/bin"

# Created by `userpath` on 2021-02-15 18:51:20
export PATH="$PATH:/Users/jamwil/.local/bin"
{{- end }}

# Miscellaneous
export GPG_TTY=$TTY
export RICH_THEME=monokai

# pyenv
export PATH="$HOME/.pyenv/bin:$PATH"
eval "$(pyenv init -)"

# chezmoi
export PATH="$HOME/bin:$PATH"

# go
export PATH="$PATH:/Users/jamwil/go/bin"

# iterm2
test -e /Users/jamwil/.iterm2_shell_integration.zsh && source /Users/jamwil/.iterm2_shell_integration.zsh || true

source ~/powerlevel10k/powerlevel10k.zsh-theme

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
